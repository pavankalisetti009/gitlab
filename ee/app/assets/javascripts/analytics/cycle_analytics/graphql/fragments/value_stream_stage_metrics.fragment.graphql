#import "~/graphql_shared/fragments/page_info.fragment.graphql"

fragment ValueStreamStageMetrics on ValueStreamConnection {
  nodes {
    stages(id: $stageId) {
      id
      name
      metrics(
        timeframe: { start: $startDate, end: $endDate }
        assigneeUsernames: $assigneeUsernames
        authorUsername: $authorUsername
        milestoneTitle: $milestoneTitle
        labelNames: $labelNames
        not: $not
      ) {
        items(sort: END_EVENT_ASC, first: 100, after: $endCursor) {
          edges {
            node {
              durationInMilliseconds
              endEventTimestamp
              record {
                __typename
              }
            }
          }
          pageInfo {
            ...PageInfo
          }
        }
      }
    }
  }
}
