<script>
import { GlButton, GlIcon } from '@gitlab/ui';
import { s__ } from '~/locale';
import { SEVERITY_LEVELS } from '~/vue_shared/constants';

export default {
  name: 'ProjectVulnerabilityCounts',
  components: {
    GlIcon,
    GlButton,
  },
  props: {
    severityItems: {
      type: Array,
      required: true,
    },
  },
  methods: {
    severityLabel(severity) {
      return SEVERITY_LEVELS[severity.toLowerCase()];
    },
  },
  i18n: {
    vulnerabilityReportButton: s__('SecurityInventory|View vulnerability report'),
  },
};
</script>

<template>
  <div>
    <ul class="gl-mb-3 gl-grid gl-grid-cols-2 gl-gap-2 gl-pl-0">
      <li
        v-for="(item, index) in severityItems"
        :key="index"
        class="gl-align-items-center gl-flex gl-items-center gl-gap-2 gl-gap-x-2 gl-pr-10"
        data-testid="severity-item"
      >
        <span
          ><gl-icon
            data-testid="severity-icon"
            :name="item.icon"
            :size="12"
            :class="item.iconColor"
          />
        </span>
        <span data-testid="severity-label" class="gl-font-bold"
          >{{ severityLabel(item.label) }}:</span
        >
        <span data-testid="severity-value">{{ item.value }}</span>
      </li>
    </ul>
    <gl-button category="secondary" variant="confirm" class="gl-w-full" size="small">{{
      $options.i18n.vulnerabilityReportButton
    }}</gl-button>
  </div>
</template>
