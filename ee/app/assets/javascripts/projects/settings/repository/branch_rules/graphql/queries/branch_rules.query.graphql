#import "~/graphql_shared/fragments/page_info.fragment.graphql"

query getBranchRulesEE($projectPath: ID!, $after: String, $first: Int) {
  project(fullPath: $projectPath) {
    id
    branchRules(first: $first, after: $after) {
      nodes {
        name
        id
        isDefault
        matchingBranchesCount
        branchProtection {
          isGroupLevel
          allowForcePush
          codeOwnerApprovalRequired
          protectedFromPushBySecurityPolicy @gl_introduced(version: "18.7.0")
          warnProtectedFromPushBySecurityPolicy @gl_introduced(version: "18.8.0")
          mergeAccessLevels {
            edges {
              node {
                accessLevel
                accessLevelDescription
                group {
                  id
                }
                user {
                  id
                }
              }
            }
          }
          pushAccessLevels {
            edges {
              node {
                accessLevel
                accessLevelDescription
                group {
                  id
                }
                user {
                  id
                }
              }
            }
          }
        }
        externalStatusChecks {
          nodes {
            id
          }
        }
        approvalRules {
          nodes {
            id
          }
        }
      }
      pageInfo {
        ...PageInfo
      }
    }
  }
}
