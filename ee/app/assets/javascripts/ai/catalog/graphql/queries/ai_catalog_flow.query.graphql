#import "../fragments/ai_catalog_item.fragment.graphql"
#import "../fragments/ai_catalog_flow_version.fragment.graphql"
#import "../fragments/ai_catalog_third_party_flow_version.fragment.graphql"

query aiCatalogFlow(
  $id: AiCatalogItemID!
  $showSoftDeleted: Boolean
  $projectId: ProjectID!
  $hasProject: Boolean = false
) {
  aiCatalogItem(id: $id, showSoftDeleted: $showSoftDeleted) {
    ...BaseAiCatalogItem
    project {
      id
      nameWithNamespace
      webUrl
      rootGroup @gl_introduced(version: "18.6.0") {
        id
        fullName
      }
    }
    latestVersion {
      ...BaseAiCatalogFlowVersion
      ...BaseAiCatalogThirdPartyFlowVersion
    }
    configurationForProject(projectId: $projectId) @include(if: $hasProject) {
      id
      enabled
      flowTrigger {
        id
        eventTypes
      }
      pinnedItemVersion {
        ...BaseAiCatalogFlowVersion
        ...BaseAiCatalogThirdPartyFlowVersion
      }
    }
  }
}
