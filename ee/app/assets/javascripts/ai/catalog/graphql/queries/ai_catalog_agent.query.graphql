#import "../fragments/ai_catalog_item.fragment.graphql"
#import "../fragments/ai_catalog_item_version.fragment.graphql"
#import "../fragments/ai_catalog_agent_version.fragment.graphql"

query aiCatalogAgent(
  $id: AiCatalogItemID!
  $showSoftDeleted: Boolean
  $projectId: ProjectID!
  $hasProject: Boolean = false
) {
  aiCatalogItem(id: $id, showSoftDeleted: $showSoftDeleted) {
    ...BaseAiCatalogItem
    project {
      id
      nameWithNamespace
      webUrl
    }
    latestVersion {
      ...BaseAiCatalogAgentVersion
    }
    versions {
      nodes {
        ...BaseAiCatalogAgentVersion
      }
    }
    configurationForProject(projectId: $projectId) @include(if: $hasProject) {
      id
      enabled
      pinnedItemVersion {
        id
        updatedAt
        ...BaseAiCatalogItemVersion
        ... on AiCatalogAgentVersion {
          systemPrompt
          tools {
            nodes {
              id
              name
              title
            }
          }
        }
      }
    }
  }
}
