<script>
import { GlAlert, GlSprintf, GlLink } from '@gitlab/ui';
import UserCalloutDismisser from '~/vue_shared/components/user_callout_dismisser.vue';
import { helpPagePath } from '~/helpers/help_page_helper';

export default {
  name: 'LimitedExperienceAlert',
  components: {
    GlAlert,
    GlSprintf,
    GlLink,
    UserCalloutDismisser,
  },
  advancedVulnerabilityManagementLink: helpPagePath(
    'user/application_security/vulnerability_report/_index.md',
    {
      anchor: 'advanced-vulnerability-management',
    },
  ),
};
</script>

<template>
  <user-callout-dismisser feature-name="vulnerability_report_limited_experience">
    <template #default="{ dismiss, shouldShowCallout }">
      <gl-alert v-if="shouldShowCallout" variant="tip" class="gl-mb-4" @dismiss="dismiss">
        <strong>{{ s__('SecurityReports|Limited experience available') }}</strong>
        <p class="gl-mb-0">
          <gl-sprintf
            :message="
              s__(
                'SecurityReports|Your environment does not have advanced vulnerability management enabled which limits some functionality. %{linkStart}How do I enable advanced vulnerability management?%{linkEnd}',
              )
            "
          >
            <template #link="{ content }">
              <gl-link :href="$options.advancedVulnerabilityManagementLink">{{ content }}</gl-link>
            </template></gl-sprintf
          >
        </p>
      </gl-alert>
    </template>
  </user-callout-dismisser>
</template>
