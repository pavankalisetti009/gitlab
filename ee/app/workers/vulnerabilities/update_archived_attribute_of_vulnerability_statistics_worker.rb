# frozen_string_literal: true

module Vulnerabilities
  class UpdateArchivedAttributeOfVulnerabilityStatisticsWorker
    include ApplicationWorker

    feature_category :vulnerability_management

    data_consistency :sticky
    worker_resource_boundary :memory
    idempotent!

    sidekiq_options retry: 2
    sidekiq_retry_in { 5.minutes.seconds.to_i }

    def perform(project_id)
      Vulnerabilities::UpdateArchivedOfVulnerabilityStatisticsService.execute(project_id)
    end
  end
end
